find_package(MLIR REQUIRED CONFIG
             HINTS "@TTMLIR_CONFIG_MLIR_CMAKE_DIR@")

set(TTMLIR_INSTALL_PREFIX "@TTMLIR_CONFIG_INSTALL_PREFIX@")
set(TTMLIR_EXPORTED_TARGETS "@TTMLIR_EXPORTS@")
set(TTMLIR_CMAKE_DIR "${TTMLIR_INSTALL_PREFIX}/lib/cmake/ttmlir")
set(TTMLIR_BINARY_DIR "${TTMLIR_INSTALL_PREFIX}")
set(TTMLIR_INCLUDE_DIRS "${TTMLIR_INSTALL_PREFIX}/include")
set(TTMLIR_LIBRARY_DIRS "${TTMLIR_INSTALL_PREFIX}/lib")
set(TTMLIR_TOOLS_DIR "${TTMLIR_INSTALL_PREFIX}/bin")

# Provide all our library targets to users.
if(NOT TARGET TTMLIRSupport)
  @TTMLIR_CONFIG_INCLUDE_EXPORTS@

  # Append include directories to all exported targets so they propagate properly.
  foreach(target IN LISTS TTMLIR_EXPORTED_TARGETS)
    if(TARGET TTMLIR::${target})
      target_include_directories(TTMLIR::${target} INTERFACE
        "${TTMLIR_INCLUDE_DIRS}"
        "${MLIR_INCLUDE_DIRS}"
      )
    endif()
  endforeach()
endif()
